==============================
üìÑ XS-APP.JSON DOCUMENTATION
File: xs-app.json (Approuter config)
Project: invoicing-capm
Purpose: Configure routing, authentication, and resource access via SAP Approuter
==============================

üß© File Role:
This file defines how SAP Approuter should route and protect paths for:
- Static UI content (React frontend)
- CAPM backend APIs (/rest/, /odata/)
- Fiori Launchpad tile routing
- Resource loading

------------------------------
üîê authenticationMethod: "route"
------------------------------
‚úî Enables XSUAA-based authentication on a per-route basis (via `authenticationType`).
‚úî Recommended for applications needing both public and protected routes.

==============================
üîÅ ROUTES CONFIGURATION
==============================

1Ô∏è‚É£ Route: /resources/*
------------------------------
{
  "source": "^/resources/(.*)$",
  "target": "$1",
  "localDir": "resources",
  "authenticationType": "none"
}

‚úî Serves static resources (icons, fonts, etc.) without authentication.
‚úî Used internally by SAPUI5/React when loading assets.

---

2Ô∏è‚É£ Route: /rest/*
------------------------------
{
  "source": "^/rest/(.*)$",
  "target": "/rest/$1",
  "destination": "srv-api-inv",
  "authenticationType": "xsuaa"
}

‚úî Forwards `/rest/*` calls to CAPM backend (Node.js service).
‚úî Destination name: `srv-api-inv` (provided in `mta.yaml`)
‚úî Requires valid XSUAA authentication (`authenticationType: xsuaa`).
‚úî Used for REST-style custom endpoints.

---

3Ô∏è‚É£ Route: /odata/*
------------------------------
{
  "source": "^/odata/(.*)$",
  "target": "/odata/$1",
  "destination": "srv-api-inv",
  "authenticationType": "xsuaa"
}

‚úî Forwards `/odata/*` calls to CAPM's OData service.
‚úî Protected by XSUAA.
‚úî Used for exposing CDS-based services (Fiori Elements or external APIs).

---

4Ô∏è‚É£ Route: /invoicing-capm-reactapp/*
------------------------------
{
  "source": "^/invoicing-capm-reactapp/(.*)$",
  "target": "/$1",
  "localDir": "build",
  "authenticationType": "xsuaa"
}

‚úî This route is essential for **Fiori Launchpad tile support**.
‚úî The FLP will call this route when launching your app from a tile.
‚úî Maps the FLP tile intent (`semanticObject/action`) to your frontend's build output.
‚úî Still protected by XSUAA (user must log in).

---

5Ô∏è‚É£ Fallback Route: /*
------------------------------
{
  "source": "^/(.*)$",
  "target": "/$1",
  "localDir": "build",
  "authenticationType": "xsuaa"
}

‚úî Default catch-all route for serving React frontend.
‚úî Ensures routing (e.g., `/dashboard`, `/invoice/123`) works with React Router.
‚úî Important for "refresh-safe" navigation ‚Äî prevents 404 on page reload.
‚úî Also protected by XSUAA.

==============================
üß† Summary of Key Behaviors
==============================

- ‚úÖ UI content from `build/` is served with login (XSUAA).
- ‚úÖ Backend APIs (`/rest`, `/odata`) are protected.
- ‚úÖ `/resources/` are public.
- ‚úÖ FLP tile accesses `/invoicing-capm-reactapp` route.
- ‚úÖ React Router SPA navigation is safe with the catch-all `^/(.*)$` route.

==============================
‚úÖ Tips for Maintenance
==============================
- Make sure the `destination` names (`srv-api-inv`) match those in your `mta.yaml`.
- Use `xsuaa` for all secure routes ‚Äî do not expose sensitive data with `"none"`.
- If you add new routes (e.g., `/api/`), copy structure from `/rest/` or `/odata/`.

==============================
End of Documentation
==============================
